@page
@using alogentpractices.DAL
@using alogentpractices.Pages
@model alogentpractices.Pages.TaskGroupListModel
@inject ApplicationDbContext _dbContext
@{
    ViewData["Title"] = "AccuAccount : Task Group List";
}

<link rel="stylesheet" type="text/css" href="Content/TaskGroupList.css" />
<form method="post">
    @Html.AntiForgeryToken()
</form>

<!-- #include file="include/header.asp" -->
<div class="aa-title">
    <div>
        <h1><i class="title-icon fas fa-file-alt" aria-hidden="true"></i>&nbsp;&nbsp;Task Group Maintenance&nbsp;&nbsp;<a href="adminlist.asp" class="aa-command-button"><i class="aa-icon fas fa-arrow-circle-left fa-fw" title="Return to Admin Area" aria-hidden="true"></i></a></h1>
    </div>
    <div id="aa-bank-logo-container">
        <img src="customer/logo/customerlogo.gif" alt="logo" id="customer-logo-image" />
    </div>
</div>

<div class="aa-pad-md">
    <div id="aa-task-groups">
        <ul>
            <li class="k-state-active">Credit Task Groups</li>
            <li>Account Task Groups</li>
        </ul>
        <div id="aa-credit-task-groups-content">
            <div class="common add-new-group-button">
                <a class="k-button k-primary" href="/taskgroupmaint?action=ADD&taskGroupType=C&bankId=@Model.bankId"><i class="aa-icon fas fa-plus-circle" aria-hidden="true"></i>&nbsp;&nbsp;Add New Credit Task Group</a>
            </div>
            @{
                var taskGroupCredits = Model.GetTaskGroupDetails("C");
                if (@taskGroupCredits.Count == 0)
                {
                    <div class="top">No Credit Task Groups defined.</div>
                }
                else
                {
                    <table class="aa-kendo-grid">
                        <thead>
                            <tr>
                                <th>Delete</th>
                                <th>Edit</th>
                                <th>Task Group Name</th>
                                <th>Number of Tasks</th>
                                <th>Processing Type</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var taskGroupRS in taskGroupCredits)
                            {
                                <tr>
                                    <td>
                                        @if (taskGroupRS.exceptionCount == 0)
                                        {
                                            <a href="javascript:void(0);"
                                               onclick="openKendoDialog('Delete Group', '/taskgroupdeleteconfirm?taskGroupId=@taskGroupRS.taskGroupId&taskGroupType=C&bankId=@Model.bankId', 500, 700);"
                                               class="aa-command-link">
                                                <i class="aa-icon fas fa-trash-alt fa-fw" title="Delete Group"></i>
                                            </a>
                                        }
                                        else
                                        {
                                            <i class="aa-icon fas fa-trash-alt fa-fw disabled" title="Group has one or more exceptions and cannot be deleted" aria-hidden="true"></i>
                                        }
                                    </td>
                                    <td><a href="/taskgroupmaint?action=EDIT&taskGroupId=@taskGroupRS.taskGroupId&taskGroupType=C&bankId=@Model.bankId" class="aa-command-link"><i class="aa-icon fas fa-pencil-alt fa-fw" title="Edit Group"></i></a></td>
                                    <td>@taskGroupRS.taskGroupLabel</td>
                                    <td>@taskGroupRS.taskCount</td>
                                    <td>
                                        @if (taskGroupRS.TaskProcessing == "P")
                                        {
                                            @:Execute all Tasks
                                        }
                                        else
                                        {
                                            @:Execute Tasks in Order
                                        }
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                }
            }
        </div>
        <div id="aa-account-task-groups-content">
            <div class="common add-new-group-button">
                <a class="k-button k-primary" href="/taskgroupmaint?action=ADD&taskGroupType=L&bankId=@Model.bankId"><i class="aa-icon fas fa-plus-circle" aria-hidden="true"></i>&nbsp;&nbsp;Add New Account Task Group</a>
            </div>
            @{
                var taskGroupAccounts = Model.GetTaskGroupDetails("L");
                if (taskGroupAccounts.Count == 0)
                {
                    <div class="common">No Account Task Groups defined.</div>
                }
                else
                {
                    <table class="aa-kendo-grid">
                        <thead>
                            <tr>
                                <th>Delete</th>
                                <th>Edit</th>
                                <th>Task Group Name</th>
                                <th>Number of Tasks</th>
                                <th>Processing Type</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var taskGroupRS in taskGroupAccounts)
                            {
                                <tr>
                                    <td>
                                        @if (taskGroupRS.exceptionCount == 0)
                                        {
                                            <a href="javascript:void(0);" onclick="openKendoDialog('Delete Group', '/taskgroupdeleteconfirm?taskGroupId=@taskGroupRS.taskGroupId>&taskGroupType=@taskGroupRS.taskGroupType&bankId=@Model.bankId', 500, 700);" class="aa-command-link"><i class="aa-icon fas fa-trash-alt fa-fw" title="Delete Group"></i></a>
                                        }
                                        else
                                        {
                                            <i class="aa-icon fas fa-trash-alt fa-fw disabled" title="Group has one or more exceptions and cannot be deleted" aria-hidden="true"></i>
                                        }
                                    </td>
                                    <td><a href="/taskgroupmaint?action=EDIT&taskGroupId=@taskGroupRS.taskGroupId&taskGroupType=L&bankId=@Model.bankId" class="aa-command-link"><i class="aa-icon fas fa-pencil-alt fa-fw" title="Edit Group"></i></a></td>
                                    <td>@taskGroupRS.taskGroupLabel</td>
                                    <td>@taskGroupRS.taskCount</td>
                                    <td>
                                        @if (@taskGroupRS.TaskProcessing == "P")
                                        {
                                            @:Execute all Tasks
                                        }
                                        else
                                        {
                                            @:Execute Tasks in Order
                                        }
                                </tr>
                            }
                        </tbody>
                    </table>
                }
            }
        </div>
    </div>
</div>

<script type="text/javascript" src="include/javascript/utility.js"></script>
<script type="text/javascript" src="Packages/kendo-ui/js/kendo.core.min.js"></script>
<script type="text/javascript" src="Packages/kendo-ui/js/kendo.data.min.js"></script>
<script type="text/javascript" src="Packages/kendo-ui/js/kendo.userevents.min.js"></script>
<script type="text/javascript" src="Packages/kendo-ui/js/kendo.draganddrop.min.js"></script>
<script type="text/javascript" src="Packages/kendo-ui/js/kendo.popup.min.js"></script>
<script type="text/javascript" src="Packages/kendo-ui/js/kendo.window.min.js"></script>
<script type="text/javascript" src="Packages/kendo-ui/js/kendo.tabstrip.min.js"></script>
<script type="text/javascript" src="Scripts/Legacy/Kendo.Window.js"></script>
<script type="text/javascript">
    $("document").ready(function () {
        $("#aa-task-groups").kendoTabStrip();
    });
</script>